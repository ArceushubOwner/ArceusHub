local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer

-- ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ArceusHub"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Frame principal
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 250, 0, 380)
frame.Position = UDim2.new(0.05,0,0.1,0)
frame.BackgroundColor3 = Color3.fromRGB(10,20,50)
frame.BorderSizePixel = 0
frame.Parent = screenGui
local cornerFrame = Instance.new("UICorner")
cornerFrame.CornerRadius = UDim.new(0,10)
cornerFrame.Parent = frame

-- TÃ­tulo
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,30)
title.Position = UDim2.new(0,0,0,0)
title.BackgroundTransparency = 1
title.Text = "ðŸ‘¾ArceusHubðŸ‘¾"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.Parent = frame

-- Abas
local tabs = {"Main","Extras"}
local currentTab = "Main"
local tabButtons = {}
local contentFrames = {}

local tabFrame = Instance.new("Frame")
tabFrame.Size = UDim2.new(0,60,1,-30) -- altura descontando tÃ­tulo
tabFrame.Position = UDim2.new(0,0,0,30)
tabFrame.BackgroundTransparency = 1
tabFrame.Parent = frame

for i,tabName in ipairs(tabs) do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1,0,0,40)
	btn.Position = UDim2.new(0,0,0,(i-1)*45)
	btn.BackgroundColor3 = Color3.fromRGB(30,30,50)
	btn.TextColor3 = Color3.fromRGB(255,255,255)
	btn.Text = tabName
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 14
	btn.Parent = tabFrame
	tabButtons[tabName] = btn
	
	local content = Instance.new("ScrollingFrame")
	content.Size = UDim2.new(1,-60,1,-30)
	content.Position = UDim2.new(0,60,0,30)
	content.BackgroundTransparency = 1
	content.ScrollBarThickness = 8
	content.Visible = (tabName==currentTab)
	content.Parent = frame
	
	local layout = Instance.new("UIListLayout")
	layout.Padding = UDim.new(0,5)
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Parent = content
	
	contentFrames[tabName] = content
	
	btn.MouseButton1Click:Connect(function()
		for _,f in pairs(contentFrames) do f.Visible=false end
		content.Visible = true
		currentTab = tabName
	end)
end

-- FunÃ§Ã£o para criar botÃµes
local function makeButton(tab,text)
	local b = Instance.new("TextButton")
	b.Size = UDim2.new(1,-20,0,30)
	b.BackgroundColor3 = Color3.fromRGB(50,50,70)
	b.TextColor3 = Color3.fromRGB(255,255,255)
	b.Font = Enum.Font.SourceSans
	b.TextSize = 14
	b.Text = text
	b.Parent = contentFrames[tab]
	return b
end

-- WalkSpeed
local speedBox=Instance.new("TextBox")
speedBox.Size=UDim2.new(1,-20,0,28)
speedBox.BackgroundColor3=Color3.fromRGB(60,60,80)
speedBox.TextColor3=Color3.fromRGB(255,255,255)
speedBox.Text="16"
speedBox.Font=Enum.Font.SourceSans
speedBox.TextSize=14
speedBox.PlaceholderText="WalkSpeed"
speedBox.Parent = contentFrames["Main"]

-- Estados
local states={infinite=false,noclip=false,god=false,speed=16,esp=false}

-- FunÃ§Ãµes principais
local function getHumanoid()
	local c = player.Character
	if not c then return nil end
	return c:FindFirstChildOfClass("Humanoid")
end

-- InfiniteJump
local btnInfinite = makeButton("Main","Toggle InfiniteJump")
local connJump
btnInfinite.MouseButton1Click:Connect(function()
	states.infinite = not states.infinite
	btnInfinite.Text = states.infinite and "InfiniteJump: ON" or "Toggle InfiniteJump"
	if states.infinite then
		if connJump then connJump:Disconnect() end
		connJump = UserInputService.JumpRequest:Connect(function()
			local h = getHumanoid()
			if h and h.Health>0 then h:ChangeState(Enum.HumanoidStateType.Jumping) end
		end)
	else
		if connJump then connJump:Disconnect(); connJump=nil end
	end
end)

-- Noclip
local btnNoclip = makeButton("Main","Toggle Noclip")
local noclipLoop
btnNoclip.MouseButton1Click:Connect(function()
	states.noclip = not states.noclip
	btnNoclip.Text = states.noclip and "Noclip: ON" or "Toggle Noclip"
	if states.noclip then
		noclipLoop = RunService.Stepped:Connect(function()
			local c = player.Character
			if c then
				for _,p in ipairs(c:GetDescendants()) do
					if p:IsA("BasePart") and p.Name~="HumanoidRootPart" then p.CanCollide=false end
				end
			end
		end)
	else
		if noclipLoop then noclipLoop:Disconnect(); noclipLoop=nil end
		local c = player.Character
		if c then
			for _,p in ipairs(c:GetDescendants()) do
				if p:IsA("BasePart") then p.CanCollide=true end
			end
		end
	end
end)

-- Godmode
local btnGodmode = makeButton("Main","Toggle Godmode")
local godConn
btnGodmode.MouseButton1Click:Connect(function()
	states.god = not states.god
	btnGodmode.Text = states.god and "Godmode: ON" or "Toggle Godmode"
	local h = getHumanoid()
	if states.god and h then
		h.MaxHealth = math.huge; h.Health = h.MaxHealth
		if godConn then godConn:Disconnect() end
		godConn = h.HealthChanged:Connect(function() if h.Health<1 then h.Health=h.MaxHealth end end)
	else
		if godConn then godConn:Disconnect(); godConn=nil end
		if h then h.MaxHealth=100; if h.Health>100 then h.Health=100 end end
	end
end)

-- Fly
local btnFly = makeButton("Main","Fly Script")
btnFly.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Gui-Fly-v3-37111"))()
end)

-- BringAll
local btnBringAll = makeButton("Main","Bring All")
btnBringAll.MouseButton1Click:Connect(function()
	local c = player.Character
	if not c or not c:FindFirstChild("HumanoidRootPart") then return end
	local hrp = c.HumanoidRootPart
	for _,plr in pairs(Players:GetPlayers()) do
		if plr~=player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			plr.Character.HumanoidRootPart.CFrame = hrp.CFrame*CFrame.new(2,0,2)
		end
	end
end)

-- ESP
local btnESP = makeButton("Main","Toggle ESP")
local espParts = {}
btnESP.MouseButton1Click:Connect(function()
	states.esp = not states.esp
	btnESP.Text = states.esp and "ESP: ON" or "Toggle ESP"
	for _,p in pairs(espParts) do p:Destroy() end
	espParts = {}
	if states.esp then
		for _,plr in pairs(Players:GetPlayers()) do
			if plr~=player and plr.Character then
				local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
				if hrp then
					local box = Instance.new("BoxHandleAdornment")
					box.Adornee = hrp
					box.AlwaysOnTop = true
					box.ZIndex = 5
					box.Size = Vector3.new(3,5,1)
					box.Color3 = Color3.fromRGB(255,0,0)
					box.Transparency = 0.5
					box.Parent = hrp
					table.insert(espParts,box)
				end
			end
		end
	end
end)

-- Extras
local btnGiant = makeButton("Extras","Ficar Gigante")
btnGiant.MouseButton1Click:Connect(function()
	local c = player.Character
	if c then
		for _,p in ipairs(c:GetChildren()) do
			if p:IsA("BasePart") then
				p.Size = p.Size*2
			end
		end
	end
end)

local btnInvisible = makeButton("Extras","InvisÃ­vel")
btnInvisible.MouseButton1Click:Connect(function()
	local c = player.Character
	if c then
		for _,p in ipairs(c:GetChildren()) do
			if p:IsA("BasePart") then
				p.Transparency = 0.5
			end
		end
	end
end)

local btnFling = makeButton("Extras","Fling Script")
btnFling.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://rawscripts.net/raw/Fling-Script"))()
end)

-- Teleport
local tpBox=Instance.new("TextBox")
tpBox.Size=UDim2.new(1,-20,0,28)
tpBox.BackgroundColor3=Color3.fromRGB(60,60,80)
tpBox.TextColor3=Color3.fromRGB(255,255,255)
tpBox.PlaceholderText="Digite 3 letras do jogador"
tpBox.Font=Enum.Font.SourceSans
tpBox.TextSize=14
tpBox.Parent = contentFrames["Main"]

local btnTP=makeButton("Main","Teleport to Player")
btnTP.MouseButton1Click:Connect(function()
	local text=tpBox.Text:lower()
	if #text>=3 then
		for _,plr in pairs(Players:GetPlayers()) do
			if plr~=player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
				if plr.Name:sub(1,3):lower()==text:sub(1,3) then
					local hrp=player.Character and player.Character:FindFirstChild("HumanoidRootPart")
					if hrp then hrp.CFrame=plr.Character.HumanoidRootPart.CFrame+Vector3.new(2,0,2) end
					break
				end
			end
		end
	end
end)

-- WalkSpeed ajuste
speedBox.FocusLost:Connect(function()
	local val=tonumber(speedBox.Text)
	if val and val>0 and val<=500 then
		states.speed=val
		local h=player.Character and player.Character:FindFirstChildOfClass("Humanoid")
		if h then h.WalkSpeed=states.speed end
	else
		speedBox.Text=tostring(states.speed)
	end
end)

-- Respawn
player.CharacterAdded:Connect(function(char)
	wait(0.5)
	local h = char:FindFirstChildOfClass("Humanoid")
	if h then
		h.WalkSpeed = states.speed
		if states.god then
			h.MaxHealth = math.huge
			h.Health = h.MaxHealth
			if godConn then godConn:Disconnect() end
			godConn = h.HealthChanged:Connect(function() if h.Health<1 then h.Health=h.MaxHealth end end)
		end
	end
end)
