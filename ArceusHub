-- =================== ArceusHub Completo ===================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Debris = game:GetService("Debris")
local ChatService = game:GetService("Chat")

local player = Players.LocalPlayer
if not player then return end

local FRAME_SIZE = UDim2.new(0,250,0,400)
local MINI_SIZE = UDim2.new(0,120,0,40)
local TWEEN_TIME = 0.25

-- =================== ScreenGui e Frame ===================
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ArceusHub"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = FRAME_SIZE
frame.Position = UDim2.new(0.05,0,0.05,0)
frame.BackgroundColor3 = Color3.fromRGB(10,20,50)
frame.BorderSizePixel = 0
frame.Parent = screenGui
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,10)

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,30)
title.Position = UDim2.new(0,0,0,0)
title.BackgroundTransparency = 1
title.Text = "ðŸ‘¾ArceusHubðŸ‘¾"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.Parent = frame

-- Frame abas
local tabFrame = Instance.new("Frame")
tabFrame.Size = UDim2.new(0,60,1,-30)
tabFrame.Position = UDim2.new(0,0,0,30)
tabFrame.BackgroundTransparency = 1
tabFrame.Parent = frame

local contentFrames = {}
local tabs = {"Main","Visuais"}
local currentTab = "Main"

for i, tabName in ipairs(tabs) do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1,0,0,40)
	btn.Position = UDim2.new(0,0,0,(i-1)*45)
	btn.BackgroundColor3 = Color3.fromRGB(30,30,50)
	btn.TextColor3 = Color3.fromRGB(255,255,255)
	btn.Text = tabName
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 14
	btn.Parent = tabFrame

	local content = Instance.new("ScrollingFrame")
	content.Size = UDim2.new(1,-60,1,-30)
	content.Position = UDim2.new(0,60,0,30)
	content.BackgroundTransparency = 1
	content.ScrollBarThickness = 8
	content.Visible = (tabName == currentTab)
	content.Parent = frame

	local layout = Instance.new("UIListLayout", content)
	layout.Padding = UDim.new(0,6)
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
		content.CanvasSize = UDim2.new(0,0,0, layout.AbsoluteContentSize.Y + 10)
	end)

	btn.MouseButton1Click:Connect(function()
		for _,f in pairs(contentFrames) do f.Visible = false end
		content.Visible = true
		currentTab = tabName
	end)

	contentFrames[tabName] = content
end

-- Helper botÃ£o
local function makeButton(tabName,text)
	local parent = contentFrames[tabName]
	local b = Instance.new("TextButton")
	b.Size = UDim2.new(1,-20,0,30)
	b.BackgroundColor3 = Color3.fromRGB(50,50,70)
	b.TextColor3 = Color3.fromRGB(255,255,255)
	b.Font = Enum.Font.SourceSans
	b.TextSize = 14
	b.Text = text
	b.Parent = parent
	return b
end

-- MiniFrame e bolinha
local miniFrame = Instance.new("TextButton")
miniFrame.Size = MINI_SIZE
miniFrame.Position = UDim2.new(0.05,0,0.05,0)
miniFrame.BackgroundColor3 = Color3.fromRGB(20,40,80)
miniFrame.Text = "ArceusHub"
miniFrame.TextColor3 = Color3.fromRGB(1,1,1)
miniFrame.Font = Enum.Font.SourceSansBold
miniFrame.TextSize = 16
miniFrame.Visible = false
miniFrame.Parent = screenGui
Instance.new("UICorner", miniFrame).CornerRadius = UDim.new(0,10)

local ballButton = Instance.new("ImageButton")
ballButton.Size = UDim2.new(0,50,0,50)
ballButton.Position = UDim2.new(0,20,1,-70)
ballButton.BackgroundColor3 = Color3.fromRGB(10,20,50)
ballButton.BorderSizePixel = 0
ballButton.Image = "rbxassetid://132606146905925"
ballButton.Visible = false
ballButton.Parent = screenGui
Instance.new("UICorner", ballButton).CornerRadius = UDim.new(1,0)

-- Minimizar e fechar
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0,25,0,25)
minimizeBtn.Position = UDim2.new(1,-60,0,5)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(20,40,80)
minimizeBtn.Text = "-"
minimizeBtn.TextColor3 = Color3.fromRGB(1,1,1)
minimizeBtn.Font = Enum.Font.SourceSansBold
minimizeBtn.TextSize = 18
minimizeBtn.Parent = frame

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,25,0,25)
closeBtn.Position = UDim2.new(1,-30,0,5)
closeBtn.BackgroundColor3 = Color3.fromRGB(80,20,20)
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.fromRGB(1,1,1)
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 18
closeBtn.Parent = frame

-- =================== Drag ===================
local function makeDraggable(gui)
	local dragging=false
	local dragStart,startPos,dragInput
	gui.InputBegan:Connect(function(input)
		if input.UserInputType==Enum.UserInputType.MouseButton1 or input.UserInputType==Enum.UserInputType.Touch then
			dragging=true
			dragStart=input.Position
			startPos=gui.Position
			input.Changed:Connect(function()
				if input.UserInputState==Enum.UserInputState.End then dragging=false end
			end)
		end
	end)
	gui.InputChanged:Connect(function(input)
		if input.UserInputType==Enum.UserInputType.MouseMovement or input.UserInputType==Enum.UserInputType.Touch then
			dragInput=input
		end
	end)
	RunService.RenderStepped:Connect(function()
		if dragging and dragInput then
			local delta=dragInput.Position-dragStart
			gui.Position=UDim2.new(0,math.clamp(startPos.X.Offset+delta.X,0,workspace.CurrentCamera.ViewportSize.X-gui.AbsoluteSize.X),
				0,math.clamp(startPos.Y.Offset+delta.Y,0,workspace.CurrentCamera.ViewportSize.Y-gui.AbsoluteSize.Y))
		end
	end)
end

makeDraggable(frame)
makeDraggable(ballButton)
makeDraggable(miniFrame)

-- Minimize/restore
minimizeBtn.MouseButton1Click:Connect(function()
	frame.Visible=false
	ballButton.Visible=true
end)
ballButton.MouseButton1Click:Connect(function()
	frame.Visible=true
	ballButton.Visible=false
end)
closeBtn.MouseButton1Click:Connect(function()
	frame.Visible=false
	miniFrame.Visible=true
end)
miniFrame.MouseButton1Click:Connect(function()
	miniFrame.Visible=false
	frame.Visible=true
end)

-- =================== Estados ===================
local states = {infinite=false, noclip=false, god=false, speed=16, esp=false}
local extraStates = {giant=false, invisible=false}
local connJump, noclipLoop, godConn
local espParts = {}
local originalSizes = {}
local originalTrans = {}

local function getHumanoid()
	local c = player.Character
	if not c then return nil end
	return c:FindFirstChildOfClass("Humanoid")
end

-- =================== Aba Main ===================
local btnInfinite = makeButton("Main","Toggle InfiniteJump")
local btnNoclip = makeButton("Main","Toggle Noclip")
local btnGodmode = makeButton("Main","Toggle Godmode")
local btnFly = makeButton("Main","Fly Script")
local btnBringAll = makeButton("Main","Bring All")
local btnESP = makeButton("Main","Toggle ESP")

local speedBox = Instance.new("TextBox")
speedBox.Size = UDim2.new(1,-20,0,28)
speedBox.BackgroundColor3 = Color3.fromRGB(60,60,80)
speedBox.TextColor3 = Color3.fromRGB(255,255,255)
speedBox.Text = tostring(states.speed)
speedBox.Font = Enum.Font.SourceSans
speedBox.TextSize = 14
speedBox.PlaceholderText = "WalkSpeed"
speedBox.Parent = contentFrames["Main"]

speedBox.FocusLost:Connect(function()
	local val = tonumber(speedBox.Text)
	if val and val>0 and val<=500 then
		states.speed = val
		local h = getHumanoid()
		if h then h.WalkSpeed = states.speed end
	else
		speedBox.Text = tostring(states.speed)
	end
end)

-- InfiniteJump
btnInfinite.MouseButton1Click:Connect(function()
	states.infinite = not states.infinite
	btnInfinite.Text = states.infinite and "InfiniteJump: ON" or "Toggle InfiniteJump"
	if states.infinite then
		if connJump then connJump:Disconnect() end
		connJump = UserInputService.JumpRequest:Connect(function()
			local h = getHumanoid()
			if h and h.Health>0 then h:ChangeState(Enum.HumanoidStateType.Jumping) end
		end)
	else
		if connJump then connJump:Disconnect(); connJump=nil end
	end
end)

-- Noclip
btnNoclip.MouseButton1Click:Connect(function()
	states.noclip = not states.noclip
	btnNoclip.Text = states.noclip and "Noclip: ON" or "Toggle Noclip"
	if states.noclip then
		noclipLoop = RunService.Stepped:Connect(function()
			local c = player.Character
			if c then
				for _,p in ipairs(c:GetDescendants()) do
					if p:IsA("BasePart") and p.Name~="HumanoidRootPart" then p.CanCollide=false end
				end
			end
		end)
	else
		if noclipLoop then noclipLoop:Disconnect(); noclipLoop=nil end
		local c = player.Character
		if c then
			for _,p in ipairs(c:GetDescendants()) do
				if p:IsA("BasePart") then p.CanCollide=true end
			end
		end
	end
end)

-- Godmode
btnGodmode.MouseButton1Click:Connect(function()
	states.god = not states.god
	btnGodmode.Text = states.god and "Godmode: ON" or "Toggle Godmode"
	local h = getHumanoid()
	if states.god and h then
		h.MaxHealth = math.huge
		h.Health = h.MaxHealth
		if godConn then godConn:Disconnect() end
		godConn = h.HealthChanged:Connect(function() if h.Health<1 then h.Health=h.MaxHealth end end)
	else
		if godConn then godConn:Disconnect(); godConn=nil end
		if h then h.MaxHealth=100; if h.Health>100 then h.Health=100 end end
	end
end)

-- Fly Executor
btnFly.MouseButton1Click:Connect(function()
	pcall(function()
		loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Gui-Fly-v3-37111"))()
	end)
end)

-- BringAll
btnBringAll.MouseButton1Click:Connect(function()
	local c = player.Character
	if not c or not c:FindFirstChild("HumanoidRootPart") then return end
	local hrp = c.HumanoidRootPart
	for _,plr in pairs(Players:GetPlayers()) do
		if plr~=player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			plr.Character.HumanoidRootPart.CFrame = hrp.CFrame*CFrame.new(2,0,2)
		end
	end
end)

-- ESP
btnESP.MouseButton1Click:Connect(function()
	states.esp = not states.esp
	btnESP.Text = states.esp and "ESP: ON" or "Toggle ESP"
	for _,p in pairs(espParts) do p:Destroy() end
	espParts={}
	if states.esp then
		for _,plr in pairs(Players:GetPlayers()) do
			if plr~=player and plr.Character then
				local hrp=plr.Character:FindFirstChild("HumanoidRootPart")
				if hrp then
					local box = Instance.new("BoxHandleAdornment")
					box.Adornee = hrp
					box.AlwaysOnTop=true
					box.ZIndex=5
					box.Size=Vector3.new(3,5,1)
					box.Color3=Color3.fromRGB(255,0,0)
					box.Transparency=0.5
					box.Parent=hrp
					table.insert(espParts,box)
				end
			end
		end
	end
end)

-- Teleport
local tpBox = Instance.new("TextBox")
tpBox.Size = UDim2.new(1,-20,0,28)
tpBox.BackgroundColor3 = Color3.fromRGB(60,60,80)
tpBox.TextColor3 = Color3.fromRGB(255,255,255)
tpBox.PlaceholderText = "Digite 3 letras do jogador"
tpBox.Font = Enum.Font.SourceSans
tpBox.TextSize = 14
tpBox.Parent = contentFrames["Main"]

local btnTP = makeButton("Main","Teleport to Player")
btnTP.MouseButton1Click:Connect(function()
	local text = (tpBox.Text or ""):lower()
	if #text>=3 then
		for _,plr in pairs(Players:GetPlayers()) do
			if plr~=player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
				if plr.Name:sub(1,3):lower()==text:sub(1,3) then
					local hrp=player.Character and player.Character:FindFirstChild("HumanoidRootPart")
					if hrp then hrp.CFrame=plr.Character.HumanoidRootPart.CFrame+Vector3.new(2,0,2) end
					break
				end
			end
		end
	end
end)

-- =================== Aba Visuais ===================
local btnGiant = makeButton("Visuais","Ficar Gigante")
btnGiant.MouseButton1Click:Connect(function()
	local c = player.Character
	if not c then return end
	extraStates.giant = not extraStates.giant
	btnGiant.Text = extraStates.giant and "Gigante: ON" or "Ficar Gigante"
	if extraStates.giant then
		originalSizes = {}
		for _,part in ipairs(c:GetDescendants()) do
			if part:IsA("BasePart") then
				originalSizes[part]=part.Size
				part.Size=part.Size*2
			end
		end
	else
		for part,sz in pairs(originalSizes) do
			if part and part:IsA("BasePart") then pcall(function() part.Size=sz end) end
		end
		originalSizes={}
	end
end)

local btnInvisible = makeButton("Visuais","InvisÃ­vel")
btnInvisible.MouseButton1Click:Connect(function()
	local c = player.Character
	if not c then return end
	extraStates.invisible = not extraStates.invisible
	btnInvisible.Text = extraStates.invisible and "InvisÃ­vel: ON" or "InvisÃ­vel"
	if extraStates.invisible then
		originalTrans = {}
		for _,part in ipairs(c:GetDescendants()) do
			if part:IsA("BasePart") then
				originalTrans[part]=part.Transparency
				part.Transparency=1
			elseif part:IsA("Decal") or part:IsA("Texture") then
				originalTrans[part]=part.Transparency
				part.Transparency=1
			end
		end
	else
		for part,tr in pairs(originalTrans) do
			if part and (part:IsA("BasePart") or part:IsA("Decal") or part:IsA("Texture")) then
				pcall(function() part.Transparency=tr end)
			end
		end
		originalTrans={}
	end
end)

-- =================== Fly Original ===================
local btnFlyOriginal = makeButton("Visuais","Fly Original")
btnFlyOriginal.MouseButton1Click:Connect(function()
	local c = player.Character
	if not c or not c:FindFirstChild("HumanoidRootPart") then return end
	local hrp = c.HumanoidRootPart
	local humanoid = getHumanoid()
	if not humanoid then return end
	
	if hrp:FindFirstChild("FlyBV") then hrp.FlyBV:Destroy() end
	
	local bv = Instance.new("BodyVelocity")
	bv.Name = "FlyBV"
	bv.MaxForce = Vector3.new(1e5,1e5,1e5)
	bv.Velocity = Vector3.new(0,0,0)
	bv.Parent = hrp
	
	local speed = 50
	local uis = game:GetService("UserInputService")
	local moveVector = Vector3.new(0,0,0)
	
	local conn
	conn = game:GetService("RunService").RenderStepped:Connect(function()
		moveVector = Vector3.new(0,0,0)
		if uis:IsKeyDown(Enum.KeyCode.W) then moveVector = moveVector + workspace.CurrentCamera.CFrame.LookVector end
		if uis:IsKeyDown(Enum.KeyCode.S) then moveVector = moveVector - workspace.CurrentCamera.CFrame.LookVector end
		if uis:IsKeyDown(Enum.KeyCode.A) then moveVector = moveVector - workspace.CurrentCamera.CFrame.RightVector end
		if uis:IsKeyDown(Enum.KeyCode.D) then moveVector = moveVector + workspace.CurrentCamera.CFrame.RightVector end
		if uis:IsKeyDown(Enum.KeyCode.Space) then moveVector = moveVector + Vector3.new(0,1,0) end
		if uis:IsKeyDown(Enum.KeyCode.LeftShift) then moveVector = moveVector - Vector3.new(0,1,0) end
		if moveVector.Magnitude>0 then
			bv.Velocity = moveVector.Unit * speed
		else
			bv.Velocity = Vector3.new(0,0,0)
		end
	end)
	
	local btnOff = makeButton("Visuais","Disable Fly")
	btnOff.MouseButton1Click:Connect(function()
		if conn then conn:Disconnect(); conn=nil end
		if bv then bv:Destroy() end
		btnOff:Destroy()
	end)
end)

-- Fling
local btnFling = makeButton("Visuais","Fling Script")
btnFling.MouseButton1Click:Connect(function()
	local c = player.Character
	if not c or not c:FindFirstChild("HumanoidRootPart") then return end
	local hrp=c.HumanoidRootPart
	for _,plr in pairs(Players:GetPlayers()) do
		if plr~=player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local targetHRP = plr.Character.HumanoidRootPart
			local dir=(targetHRP.Position-hrp.Position)
			if dir.Magnitude>0 then
				local bv=Instance.new("BodyVelocity")
				bv.MaxForce=Vector3.new(1e5,1e5,1e5)
				bv.Velocity=dir.unit*120
				bv.Parent=targetHRP
				Debris:AddItem(bv,0.4)
			end
		end
	end
end)

-- Infinite Yield + Verific
local btnIY = makeButton("Visuais","Infinite Yield")
btnIY.MouseButton1Click:Connect(function()
	pcall(function()
		if player.Character and player.Character:FindFirstChild("Head") then
			ChatService:Chat(player.Character.Head,"arceus "..player.Name,Enum.ChatColor.Blue)
		end
		loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
	end)
end)

-- =================== Respawn ===================
player.CharacterAdded:Connect(function(char)
	wait(0.5)
	local h = char:FindFirstChildOfClass("Humanoid")
	if h then
		h.WalkSpeed = states.speed
		if states.god then
			h.MaxHealth = math.huge
			h.Health = h.MaxHealth
			if godConn then godConn:Disconnect() end
			godConn=h.HealthChanged:Connect(function() if h.Health<1 then h.Health=h.MaxHealth end end)
		end
	end
end)

-- inicializa aba Main
for name,content in pairs(contentFrames) do
	content.Visible=(name=="Main")
end

print("ArceusHub carregado com Fly Original, Minimizar, Verific e funÃ§Ãµes completas!")
