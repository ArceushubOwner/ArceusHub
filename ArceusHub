local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ArceusHub"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Frame principal com Scroll
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 240, 0, 380)
frame.Position = UDim2.new(0.05, 0, 0.1, 0)
frame.BackgroundColor3 = Color3.fromRGB(10, 20, 50)
frame.BorderSizePixel = 0
frame.Parent = screenGui

local cornerFrame = Instance.new("UICorner")
cornerFrame.CornerRadius = UDim.new(0, 10)
cornerFrame.Parent = frame

local scroll = Instance.new("ScrollingFrame")
scroll.Size = UDim2.new(1,0,1,0)
scroll.CanvasSize = UDim2.new(0,0,0,0)
scroll.ScrollBarThickness = 8
scroll.BackgroundTransparency = 1
scroll.Parent = frame

local uiList = Instance.new("UIListLayout")
uiList.Padding = UDim.new(0,5)
uiList.SortOrder = Enum.SortOrder.LayoutOrder
uiList.Parent = scroll

local function updateCanvas()
	scroll.CanvasSize = UDim2.new(0,0,0,uiList.AbsoluteContentSize.Y + 10)
end
uiList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(updateCanvas)

-- TÃ­tulo
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,30)
title.BackgroundTransparency = 1
title.Text = "ðŸ‘¾ArceusHubðŸ‘¾"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.Parent = scroll

-- FunÃ§Ã£o para criar botÃµes
local function makeButton(text)
	local b = Instance.new("TextButton")
	b.Size = UDim2.new(1, -20, 0, 30)
	b.BackgroundColor3 = Color3.fromRGB(50,50,70)
	b.Text = text
	b.TextColor3 = Color3.fromRGB(255,255,255)
	b.Font = Enum.Font.SourceSans
	b.TextSize = 14
	b.Parent = scroll
	updateCanvas()
	return b
end

-- Minimizar / retÃ¢ngulo
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0, 25, 0, 25)
minimizeBtn.Position = UDim2.new(1, -30, 0, 5)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(20,40,80)
minimizeBtn.Text = "X"
minimizeBtn.TextColor3 = Color3.new(1,1,1)
minimizeBtn.Font = Enum.Font.SourceSansBold
minimizeBtn.TextSize = 18
minimizeBtn.Parent = frame

local miniFrame = Instance.new("TextButton")
miniFrame.Size = UDim2.new(0, 140, 0, 40)
miniFrame.Position = UDim2.new(0.05, 0, 0.1, 0)
miniFrame.BackgroundColor3 = Color3.fromRGB(20,40,80)
miniFrame.Text = "ðŸ‘¾ArceusHubðŸ‘¾"
miniFrame.TextColor3 = Color3.new(1,1,1)
miniFrame.Font = Enum.Font.SourceSansBold
miniFrame.TextSize = 16
miniFrame.Visible = false
miniFrame.Parent = screenGui

local miniCorner = Instance.new("UICorner")
miniCorner.CornerRadius = UDim.new(0,10)
miniCorner.Parent = miniFrame

-- FunÃ§Ã£o dos botÃµes
minimizeBtn.MouseButton1Click:Connect(function()
	frame.Visible = false
	miniFrame.Visible = true
end)

miniFrame.MouseButton1Click:Connect(function()
	frame.Visible = true
	miniFrame.Visible = false
end)

-- Drag para mobile e PC
local function makeDraggable(guiObject)
	local dragging = false
	local dragStart, startPos
	local dragInput

	guiObject.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = guiObject.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	guiObject.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = input
		end
	end)

	RunService.RenderStepped:Connect(function()
		if dragging and dragInput then
			local delta = dragInput.Position - dragStart
			guiObject.Position = UDim2.new(
				0, math.clamp(startPos.X.Offset + delta.X, 0, workspace.CurrentCamera.ViewportSize.X - guiObject.AbsoluteSize.X),
				0, math.clamp(startPos.Y.Offset + delta.Y, 0, workspace.CurrentCamera.ViewportSize.Y - guiObject.AbsoluteSize.Y)
			)
		end
	end)
end

makeDraggable(frame)
makeDraggable(miniFrame)

-- Estados
local states = {infinite=false, noclip=false, god=false, speed=16, esp=false}

-- Criar botÃµes
local btnInfinite = makeButton("Toggle InfiniteJump")
local btnNoclip = makeButton("Toggle Noclip")
local btnGodmode = makeButton("Toggle Godmode")
local btnFly = makeButton("Fly Script")
local btnBringAll = makeButton("Bring All")
local btnESP = makeButton("Toggle ESP")

-- Teleport
local tpBox = Instance.new("TextBox")
tpBox.Size = UDim2.new(1, -20, 0, 28)
tpBox.BackgroundColor3 = Color3.fromRGB(60,60,80)
tpBox.TextColor3 = Color3.fromRGB(255,255,255)
tpBox.PlaceholderText = "Digite 3 letras do jogador"
tpBox.Font = Enum.Font.SourceSans
tpBox.TextSize = 14
tpBox.Parent = scroll
updateCanvas()

local btnTP = makeButton("Teleport to Player")
btnTP.MouseButton1Click:Connect(function()
	local text = tpBox.Text:lower()
	if #text >= 3 then
		for _,plr in pairs(Players:GetPlayers()) do
			if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
				if plr.Name:sub(1,3):lower() == text:sub(1,3) then
					local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
					if hrp then
						hrp.CFrame = plr.Character.HumanoidRootPart.CFrame + Vector3.new(2,0,2)
					end
					break
				end
			end
		end
	end
end)

-- WalkSpeed
local speedBox = Instance.new("TextBox")
speedBox.Size = UDim2.new(1, -20, 0, 28)
speedBox.BackgroundColor3 = Color3.fromRGB(60,60,80)
speedBox.TextColor3 = Color3.fromRGB(255,255,255)
speedBox.Text = "16"
speedBox.Font = Enum.Font.SourceSans
speedBox.TextSize = 14
speedBox.PlaceholderText = "WalkSpeed"
speedBox.Parent = scroll
updateCanvas()

speedBox.FocusLost:Connect(function()
	local val=tonumber(speedBox.Text)
	if val and val>0 and val<=500 then
		states.speed=val
		local h=player.Character and player.Character:FindFirstChildOfClass("Humanoid")
		if h then h.WalkSpeed=states.speed end
	else
		speedBox.Text=tostring(states.speed)
	end
end)

-- FunÃ§Ãµes principais
local function getHumanoid()
	local c=player.Character
	if not c then return nil end
	return c:FindFirstChildOfClass("Humanoid")
end

-- InfiniteJump
local connJump
btnInfinite.MouseButton1Click:Connect(function()
	states.infinite = not states.infinite
	btnInfinite.Text = states.infinite and "InfiniteJump: ON" or "Toggle InfiniteJump"
	if states.infinite then
		if connJump then connJump:Disconnect() end
		connJump = UserInputService.JumpRequest:Connect(function()
			local h = getHumanoid()
			if h and h.Health>0 then h:ChangeState(Enum.HumanoidStateType.Jumping) end
		end)
	else
		if connJump then connJump:Disconnect(); connJump=nil end
	end
end)

-- Noclip
local noclipLoop
btnNoclip.MouseButton1Click:Connect(function()
	states.noclip = not states.noclip
	btnNoclip.Text = states.noclip and "Noclip: ON" or "Toggle Noclip"
	if states.noclip then
		noclipLoop=RunService.Stepped:Connect(function()
			local c=player.Character
			if c then
				for _,p in ipairs(c:GetDescendants()) do
					if p:IsA("BasePart") and p.Name~="HumanoidRootPart" then p.CanCollide=false end
				end
			end
		end)
	else
		if noclipLoop then noclipLoop:Disconnect(); noclipLoop=nil end
		local c=player.Character
		if c then
			for _,p in ipairs(c:GetDescendants()) do
				if p:IsA("BasePart") then p.CanCollide=true end
			end
		end
	end
end)

-- Godmode
local godConn
btnGodmode.MouseButton1Click:Connect(function()
	states.god=not states.god
	btnGodmode.Text=states.god and "Godmode: ON" or "Toggle Godmode"
	local h=getHumanoid()
	if states.god and h then
		h.MaxHealth=math.huge; h.Health=h.MaxHealth
		if godConn then godConn:Disconnect() end
		godConn=h.HealthChanged:Connect(function() if h.Health<1 then h.Health=h.MaxHealth end end)
	else
		if godConn then godConn:Disconnect(); godConn=nil end
		if h then h.MaxHealth=100; if h.Health>100 then h.Health=100 end end
	end
end)

-- Fly
btnFly.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Gui-Fly-v3-37111"))()
end)

-- BringAll
btnBringAll.MouseButton1Click:Connect(function()
	local c=player.Character
	if not c or not c:FindFirstChild("HumanoidRootPart") then return end
	local hrp=c.HumanoidRootPart
	for _,plr in pairs(Players:GetPlayers()) do
		if plr~=player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			plr.Character.HumanoidRootPart.CFrame=hrp.CFrame*CFrame.new(2,0,2)
		end
	end
end)

-- ESP
local espParts={}
btnESP.MouseButton1Click:Connect(function()
	states.esp=not states.esp
	btnESP.Text=states.esp and "ESP: ON" or "Toggle ESP"
	for _,p in pairs(espParts) do p:Destroy() end
	espParts={}
	if states.esp then
		for _,plr in pairs(Players:GetPlayers()) do
			if plr~=player and plr.Character then
				for _,part in pairs(plr.Character:GetDescendants()) do
					if part:IsA("BasePart") then
						local box=Instance.new("BoxHandleAdornment")
						box.Adornee=part
						box.AlwaysOnTop=true
						box.ZIndex=5
						box.Size=part.Size
						box.Color3=Color3.fromRGB(255,0,0)
						box.Transparency=0.5
						box.Parent=part
						table.insert(espParts, box)
					end
				end
			end
		end
	end
end)

-- Respawn
player.CharacterAdded:Connect(function(char)
	wait(0.5)
	local h=char:FindFirstChildOfClass("Humanoid")
	if h then
		h.WalkSpeed=states.speed
		if states.god then
			h.MaxHealth=math.huge; h.Health=h.MaxHealth
			if godConn then godConn:Disconnect() end
			godConn=h.HealthChanged:Connect(function() if h.Health<1 then h.Health=h.MaxHealth end end)
		end
	end
end)
